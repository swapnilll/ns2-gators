#summary Required modifications of the AODV protocol.

= Introduction =

The AOR-GLU protocol is an enhancement of the AODV routing protocol for MANETs. The AOR-GLU attempts to optimize the route maintenance mechanism by removing the need to flood the network while executing the route repair mechanism.

= Required Modifications =
  # *COMPLETE* Adding the aor-glu routing protocol to NS-2.
  # *COMPLETE* Add a location structure to the AODV node.
  # Retrieving a node's location information from a packet.
  # Add a location cache with location expiration timer to the AODV node.
  # Modify the RREP packet to include the destinations current location.
  # Add a LUDP packet type. The LUDP packet is used to send periodic location updates from a     destination to communicating source.
  # Modify the REPA packet to include the greedy field as well as implement greedy forwarding.
  # Add the hand-rule mechanism for splitting the REPA packet into two REPC packets.
  # Implement cross-edge detection scheme.

= Completed Modifications =
== Adding aor-glu routing protocol to NS-2 ==
NS Files Edited:
  * ../ns-2.34/common/packet.h
  * ../ns-2.34/tcl/lib/ns-default.tcl
  * ../ns-2.34/tcl/lib/ns-agent.tcl
  * ../ns-2.34/tcl/lib/ns-mobilenode.tcl
  * ../ns-2.34/tcl/lib/ns-packet.tcl
  * ../ns-2.34/tcl/lib/ns-lib.tcl
  * ../ns-2.34/trace/cmu-trace.cc - contains the trace format for the log file.
  * ../ns-2.34/trace/cmu-trace.h
  * ../ns-2.34/queue/priqueue.cc

To add the AOR-GLU protocol to ns-2 do the following:
  # Create a directory named aorglu in the ns-2.34 folder.
  # Copy the aorglu repository folder contents into the folder.
  # Replace any files needed from the "tcl/lib", "queue" "trace" folders.
  # Overwrite the Makefile.in with the repository Makefile.in.
  # Goto the ns-2.34 root directory and type: "./configure && make clean && make"
  # This should compile the aorglu protocol and add "AORGLU" to the list of available routing agents in NS-2.
  # Make sure to run the recently compiled NS executable *NOT* the /usr/bin/ns. This is likely an older NS version that does not contain the new AORGLU protocol.


== Add a location structure to the AODV node ==
The MobileNode object (ns-2.34/common/MobileNode.cc;MobileNode.h) already contains getter methods for the current node location. The location of a node can be retrieved by calling 
node->getLoc(&x, &y, &z)
Where x, y and z are double values (see MobileNode.h for member function declarations.)